# 2048 实现思路

## 规则
* 上下左右其中一个方向去滑动，每滑动一次
	* 所有的数字方块往滑动的方向靠拢，相同数字的方块在靠拢、相撞时会相加
	* 系统在空白的地方乱数出现一个数字方块，不是2就是4
* 界面，黑白，后续再添加效果


## 算法
1. 生成数字为0、2、4、8……如果是0则不显示数字（0就不用方块了）
2. 滑动事件
	* 所有的数字的移动都会向着一个指定的方向
	* 四个方向都通过矩阵旋转，模拟向左滑动
	* 去掉所有0，合并相同的相邻元素，为结果中填充0
	* 转回正确的方向
3. 记录滑动前后的矩阵状态，如果有变化就继续（没有变化，滑动应该是死胡同）
4. 随机生成数字方块
	* 在空格，不是2就是4
5. 记录空格数，每次都会重新计算存在的空格数
	* 空格数为 0，判断每行每列相邻是否有相同数字 —— 没有就 game over

## 动画
- 绝对定位(left, top)即(x, y)
- 移动，改变(left, top)，css 渐变，就产生移动效果
	- 没这么简单额。。。两步之间要有对应关系
	- 更新 oldBlocks，每个滑块得到自己下一步在哪里，比如(0,0)下一步在(0,2)
	- 根据 oldBlocks，所有滑块保持之前的 dom 顺序，都移到自己的下一步（可能会重叠在一起）
	- 移动结束，再显示计算后的矩阵 newBlocks
		- 其中包含新增的那一块，用 randomNew 标记，添加动画效果
		- 下次移动时，先清理 randomNew
	- moving
		- true: blocks,(x, y)=>(nextX, nextY)
		- false: nextBlocks 赋值给 blocks
	- canMove
	- 还在移动就触发了下一次移动：
		- 取消移动，马上达到上一次移动的目的地
		- 然后进行这次移动
- 没有数字的块就不用动啦，当做静态背景即可

## 其他
* 移动效果-ok
* 重新开始-ok
* 分数，合并得到的数字的和-ok
	- 比如，这局合并得到 4，就加 4 分
	- 显示新增的分数，moving 的时候就要显示，moving 完就隐藏
* merged 块的动效
* touch



